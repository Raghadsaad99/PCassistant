import os
import requests

API_KEY = os.getenv("GEMINI_API_KEY")
MODEL = "models/gemini-2.5-pro"  # example, check actual available model

ENDPOINT = f"https://generativelanguage.googleapis.com/v1beta2/{MODEL}:generateContent"

def ask_llm(prompt):
    if not API_KEY:
        return "Error: GEMINI_API_KEY environment variable not set."
    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json"
    }
    body = {
        "prompt": {
            "text": prompt
        }
    }
    try:
        response = requests.post(ENDPOINT, headers=headers, json=body)
        response.raise_for_status()  # Raise error for bad HTTP status
        data = response.json()
        return data['candidates'][0]['content']['text']
    except requests.exceptions.HTTPError as http_err:
        return f"HTTP error: {http_err} - {response.text}"
    except requests.exceptions.RequestException as req_err:
        return f"Network error: {req_err}"
    except Exception as e:
        return f"Unexpected error: {e}"
